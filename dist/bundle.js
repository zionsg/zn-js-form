/*!
 * zn-js-form v0.1.0 https://github.com/zionsg/zn-js-form
 * 2021-08-14T12:40:31+08:00
 */(function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window,b.ZnJsForm=a()}})(function(){var a;return function(){function b(d,e,g){function a(j,i){if(!e[j]){if(!d[j]){var f="function"==typeof require&&require;if(!i&&f)return f(j,!0);if(h)return h(j,!0);var c=new Error("Cannot find module '"+j+"'");throw c.code="MODULE_NOT_FOUND",c}var k=e[j]={exports:{}};d[j][0].call(k.exports,function(b){var c=d[j][1][b];return a(c||b)},k,k.exports,b,d,e,g)}return e[j].exports}for(var h="function"==typeof require&&require,c=0;c<g.length;c++)a(g[c]);return a}return b}()({1:[function(b,c,d){(function(b,e){"object"==typeof d&&"undefined"!=typeof c?c.exports=e():"function"==typeof a&&a.amd?a(e):(b=b||self,b.Mustache=e())})(this,function(){'use strict';/*!
   * mustache.js - Logic-less {{mustache}} templates with JavaScript
   * http://github.com/janl/mustache.js
   */function a(a){return"function"==typeof a}function b(a){return p(a)?"array":typeof a}function c(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function d(a,b){return null!=a&&"object"==typeof a&&b in a}function e(a,b){return null!=a&&"object"!=typeof a&&a.hasOwnProperty&&a.hasOwnProperty(b)}function f(a,b){return q.call(a,b)}function g(a){return!f(r,a)}function h(a,b){function d(){if(s&&!t)for(;r.length;)delete q[r.pop()];else r=[];s=!1,t=!1}function e(a){if("string"==typeof a&&(a=a.split(v,2)),!p(a)||2!==a.length)throw new Error("Invalid tags: "+a);f=new RegExp(c(a[0])+"\\s*"),h=new RegExp("\\s*"+c(a[1])),m=new RegExp("\\s*"+c("}"+a[1]))}if(!a)return[];var f,h,m,n=!1,o=[],q=[],r=[],s=!1,t=!1,A="",B=0;e(b||z.tags);for(var C,D,E,F,G,H,I=new l(a);!I.eos();){if(C=I.pos,E=I.scanUntil(f),E)for(var J=0,K=E.length;J<K;++J)F=E.charAt(J),g(F)?(r.push(q.length),A+=F):(t=!0,n=!0,A+=" "),q.push(["text",F,C,C+1]),C+=1,"\n"===F&&(d(),A="",B=0,n=!1);if(!I.scan(f))break;if(s=!0,D=I.scan(y)||"name",I.scan(u),"="===D?(E=I.scanUntil(w),I.scan(w),I.scanUntil(h)):"{"===D?(E=I.scanUntil(m),I.scan(x),I.scanUntil(h),D="&"):E=I.scanUntil(h),!I.scan(h))throw new Error("Unclosed tag at "+I.pos);if(G=">"==D?[D,E,C,I.pos,A,B,n]:[D,E,C,I.pos],B++,q.push(G),"#"===D||"^"===D)o.push(G);else if("/"===D){if(H=o.pop(),!H)throw new Error("Unopened section \""+E+"\" at "+C);if(H[1]!==E)throw new Error("Unclosed section \""+H[1]+"\" at "+C)}else"name"===D||"{"===D||"&"===D?t=!0:"="===D&&e(E)}if(d(),H=o.pop(),H)throw new Error("Unclosed section \""+H[1]+"\" at "+I.pos);return k(j(q))}function j(a){for(var b,c,d=[],e=0,f=a.length;e<f;++e)b=a[e],b&&("text"===b[0]&&c&&"text"===c[0]?(c[1]+=b[1],c[3]=b[3]):(d.push(b),c=b));return d}function k(a){for(var b,c,d=[],e=d,f=[],g=0,h=a.length;g<h;++g)switch(b=a[g],b[0]){case"#":case"^":e.push(b),f.push(b),e=b[4]=[];break;case"/":c=f.pop(),c[5]=b[2],e=0<f.length?f[f.length-1][4]:d;break;default:e.push(b);}return d}function l(a){this.string=a,this.tail=a,this.pos=0}function m(a,b){this.view=a,this.cache={".":this.view},this.parent=b}function n(){this.templateCache={_cache:{},set:function(a,b){this._cache[a]=b},get:function(a){return this._cache[a]},clear:function(){this._cache={}}}}var o=Object.prototype.toString,p=Array.isArray||function(a){return"[object Array]"===o.call(a)},q=RegExp.prototype.test,r=/\S/,t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},u=/\s*/,v=/\s+/,w=/\s*=/,x=/\s*\}/,y=/#|\^|\/|>|\{|&|=|!/;l.prototype.eos=function(){return""===this.tail},l.prototype.scan=function(a){var b=this.tail.match(a);if(!b||0!==b.index)return"";var c=b[0];return this.tail=this.tail.substring(c.length),this.pos+=c.length,c},l.prototype.scanUntil=function(a){var b,c=this.tail.search(a);return-1===c?(b=this.tail,this.tail=""):0===c?b="":(b=this.tail.substring(0,c),this.tail=this.tail.substring(c)),this.pos+=b.length,b},m.prototype.push=function(a){return new m(a,this)},m.prototype.lookup=function(b){var c,f=this.cache;if(f.hasOwnProperty(b))c=f[b];else{for(var g,h,i,j=this,k=!1;j;){if(0<b.indexOf("."))for(g=j.view,h=b.split("."),i=0;null!=g&&i<h.length;)i===h.length-1&&(k=d(g,h[i])||e(g,h[i])),g=g[h[i++]];else g=j.view[b],k=d(j.view,b);if(k){c=g;break}j=j.parent}f[b]=c}return a(c)&&(c=c.call(this.view)),c},n.prototype.clearCache=function(){"undefined"!=typeof this.templateCache&&this.templateCache.clear()},n.prototype.parse=function(a,b){var c=this.templateCache,d=a+":"+(b||z.tags).join(":"),e="undefined"!=typeof c,f=e?c.get(d):void 0;return null==f&&(f=h(a,b),e&&c.set(d,f)),f},n.prototype.render=function(a,b,c,d){var e=this.getConfigTags(d),f=this.parse(a,e),g=b instanceof m?b:new m(b,void 0);return this.renderTokens(f,g,c,a,d)},n.prototype.renderTokens=function(a,b,c,d,e){for(var f,g,h,j="",k=0,l=a.length;k<l;++k)h=void 0,f=a[k],g=f[0],"#"===g?h=this.renderSection(f,b,c,d,e):"^"===g?h=this.renderInverted(f,b,c,d,e):">"===g?h=this.renderPartial(f,b,c,e):"&"===g?h=this.unescapedValue(f,b):"name"===g?h=this.escapedValue(f,b,e):"text"===g&&(h=this.rawValue(f)),void 0!==h&&(j+=h);return j},n.prototype.renderSection=function(b,c,d,e,f){function g(a){return h.render(a,c,d,f)}var h=this,i="",k=c.lookup(b[1]);if(k){if(p(k))for(var l=0,m=k.length;l<m;++l)i+=this.renderTokens(b[4],c.push(k[l]),d,e,f);else if("object"==typeof k||"string"==typeof k||"number"==typeof k)i+=this.renderTokens(b[4],c.push(k),d,e,f);else if(a(k)){if("string"!=typeof e)throw new Error("Cannot use higher-order sections without the original template");k=k.call(c.view,e.slice(b[3],b[5]),g),null!=k&&(i+=k)}else i+=this.renderTokens(b[4],c,d,e,f);return i}},n.prototype.renderInverted=function(a,b,c,d,e){var f=b.lookup(a[1]);if(!f||p(f)&&0===f.length)return this.renderTokens(a[4],b,c,d,e)},n.prototype.indentPartial=function(a,b,c){for(var d=b.replace(/[^ \t]/g,""),e=a.split("\n"),f=0;f<e.length;f++)e[f].length&&(0<f||!c)&&(e[f]=d+e[f]);return e.join("\n")},n.prototype.renderPartial=function(b,c,d,e){if(d){var f=this.getConfigTags(e),g=a(d)?d(b[1]):d[b[1]];if(null!=g){var h=b[6],i=b[5],j=b[4],k=g;0==i&&j&&(k=this.indentPartial(g,j,h));var l=this.parse(k,f);return this.renderTokens(l,c,d,k,e)}}},n.prototype.unescapedValue=function(a,b){var c=b.lookup(a[1]);if(null!=c)return c},n.prototype.escapedValue=function(a,b,c){var d=this.getConfigEscape(c)||z.escape,e=b.lookup(a[1]);if(null!=e)return"number"==typeof e&&d===z.escape?e+"":d(e)},n.prototype.rawValue=function(a){return a[1]},n.prototype.getConfigTags=function(a){return p(a)?a:a&&"object"==typeof a?a.tags:void 0},n.prototype.getConfigEscape=function(a){return a&&"object"==typeof a&&!p(a)?a.escape:void 0};var z={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(a){A.templateCache=a},get templateCache(){return A.templateCache}},A=new n;return z.clearCache=function(){return A.clearCache()},z.parse=function(a,b){return A.parse(a,b)},z.render=function(a,c,d,e){if("string"!=typeof a)throw new TypeError("Invalid template! Template should be a \"string\" but \""+b(a)+"\" was given as the first argument for mustache#render(template, view, partials)");return A.render(a,c,d,e)},z.escape=function(a){return(a+"").replace(/[&<>"'`=\/]/g,function(a){return t[a]})},z.Scanner=l,z.Context=m,z.Writer=n,z})},{}],2:[function(a,b){const c=a("mustache"),d=a("./utils.js");b.exports=function(){function a(b){this.options=Object.assign({},a.prototype.options,b||{})}return a.prototype.errors=[],a.prototype.options={choices:null,disabled:!1,emptyOptionText:"Please select an option",errorsTemplate:"",fieldAttributes:{},fieldClasses:[],fieldTemplate:"<div {{{fieldAttributes}}} class=\"{{{fieldClasses}}}\"><label for=\"{{{name}}}\" {{{labelAttributes}}} class=\"{{{labelClasses}}}\">{{label}}</label>{{{inputHtml}}}{{#note}}<div class=\"{{{noteClasses}}}\">{{{note}}}</div>{{/note}}{{{errorsHtml}}}</div>",inputAttributes:{},inputClasses:[],inputTemplate:"",inputType:"text",label:"",labelAttributes:{},labelClasses:[],name:"",note:"",noteClasses:[],readonly:!1,required:!1,requiredText:"",value:"",validateFunction:null},a.prototype.render=function(a=null){let b=this,e=[],f=!1;Object.keys(this.options.choices||{}).forEach(function(a){a===b.options.value&&(f=!0),e.push({optionValue:a,optionText:b.options.choices[a],optionSelected:a===b.options.value})});let g=c.render(this.options.inputTemplate||"",{name:this.options.name,type:this.options.inputType,attributes:d.attributesToString(Object.assign({disabled:this.options.disabled?"":null,readonly:this.options.readonly?"":null,required:this.options.required?"":null},this.options.inputAttributes||{})),classes:this.options.inputClasses.join(" "),selectOptions:e,hasSelectedOption:f,emptyOptionText:this.options.emptyOptionText}),h=c.render(this.options.errorsTemplate||"",{errors:this.errors});return c.render(this.options.fieldTemplate||"",Object.assign({name:this.options.name,fieldAttributes:d.attributesToString(this.options.fieldAttributes),fieldClasses:this.options.fieldClasses.join(" "),label:this.options.label,labelAttributes:d.attributesToString(this.options.labelAttributes),labelClasses:this.options.labelClasses.join(" "),note:this.options.note,noteClasses:this.options.noteClasses.join(" "),inputHtml:g,errorsHtml:h},a||{}))},a.prototype.validate=function(a,b,c){let d=[];this.options.required&&["",void 0,null].includes(b)&&d.push(this.options.requiredText);let e=this.options.validateFunction;return e&&"function"==typeof e&&d.push(...e(a,b,c)),this.errors=d,d},a}()},{"./utils.js":6,mustache:1}],3:[function(a,b){const c=a("mustache"),d=a("./utils.js");b.exports=function(){function a(b){this.options=Object.assign({},a.prototype.options,b||{})}return a.prototype.name="",a.prototype.options={fieldNames:[],fieldsetAttributes:{},fieldsetClasses:[],fieldsetTemplate:"<fieldset name=\"{{name}}\" {{{fieldsetAttributes}}} class=\"{{{fieldsetClasses}}}\"><legend>{{legend}}</legend>{{{fieldsHtml}}}</fieldset>",legend:"",name:""},a.prototype.render=function(a=null){return c.render(this.options.fieldsetTemplate||"",Object.assign({name:this.options.name,fieldsetAttributes:d.attributesToString(this.options.fieldsetAttributes),fieldsetClasses:this.options.fieldsetClasses.join(" "),legend:this.options.legend},a||{}))},a}()},{"./utils.js":6,mustache:1}],4:[function(a,b){const c=a("mustache");b.exports=function(){function a(b){this.config=Object.assign({},a.prototype.config,b||{})}return a.prototype.config={action:"",attributes:{},classes:[],errorsTemplate:"<div class=\"errors\">{{#errors}}<ul><li>{{.}}</li></ul>{{/errors}}</div>",formTemplate:"<form name=\"{{name}}\" method=\"{{method}}\" action=\"{{{action}}}\" {{{attributes}}} class=\"{{{classes}}}\">{{{formHtml}}}</form>",inputTemplates:{text:"<input name=\"{{name}}\" type=\"{{type}}\" value=\"{{value}}\" {{{attributes}}} class=\"{{{classes}}}\">",select:"<select name=\"{{name}}\" {{{attributes}}} class=\"{{{classes}}}\"> <option value=\"\" {{^hasSelectedOption}}selected{{/hasSelectedOption}}>{{emptyOptionText}}</option>{{#selectOptions}}  <option value=\"{{optionValue}}\"    {{#optionSelected}}selected{{/optionSelected}}>{{optionText}}</option>{{/selectOptions}}</select>"},method:"POST",name:"",requiredText:"This field is required."},a.prototype.fieldsets=new Map,a.prototype.fields=new Map,a.prototype.render=function(a=null){let b=this,d=[];for(const[b,c]of Object.entries(this.config.attributes))null!==c&&d.push(b+(""===c?"":`="${c}"`));let e={};this.fields.forEach(function(a,c){a.options.name=a.options.name||c,a.options.errorsTemplate=a.options.errorsTemplate||b.config.errorsTemplate,a.options.inputTemplate=a.options.inputTemplate||b.config.inputTemplates[a.options.inputType]||b.config.inputTemplates.text,a.options.requiredText=a.options.requiredText||b.config.requiredText,e[c]=a.render()});let f="";return 0===this.fieldsets.size?f=Object.values(e).join("\n"):this.fieldsets.forEach(function(a,b){a.options.name=a.options.name||b;let c="";a.fieldNames.forEach(function(a){c+=(e[a]||"")+"\n"}),f=a.render({fieldsHtml:c})}),c.render(this.config.formTemplate||"",Object.assign({name:this.config.name,method:this.config.method,action:this.config.action,attributes:d.join(" "),classes:this.config.classes.join(" "),formHtml:f},a||{}))},a.prototype.validate=function(a){let b={},c=!1;return this.fields.forEach((d,e)=>{let f=d.validate(e,a[e],a);f&&(c=!0,b[e]=f)}),c?b:null},a}()},{mustache:1}],5:[function(a,b){b.exports={Form:a("./Form.js"),Fieldset:a("./Fieldset.js"),Field:a("./Field.js")}},{"./Field.js":2,"./Fieldset.js":3,"./Form.js":4}],6:[function(a,b){b.exports=function(){return{attributesToString:function(a){let b=[];for(const[c,d]of Object.entries(a||{}))null!==d&&b.push(c+(""===d?"":`="${d}"`));return b.join(" ")},stripWhitespace:function(a){return(a||"").trim().replace(/[\r\n]/g,"").replace(/\s{2,}/g," ")}}}()},{}]},{},[5])(5)});